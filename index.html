<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gala Couleur 2026</title>
  <meta name="description" content="Gala 2026 ‚Äî Fond d'√©cran diaporama en fondu + admin upload + RSVP." />
  <style>
    :root{
      --orange:#ff7a00; --orange-2:#ff9a3b; --ink:#0c0c0d; --muted:#5a5a60; --line:#ececf0;
      --radius:16px; --shadow:0 8px 24px rgba(0,0,0,.08)
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial,"Noto Sans";
      color:var(--ink); background:#fff; line-height:1.55;
    }

    /* ===== Fond diaporama (derri√®re toute la page) ===== */
    #bg-slideshow{
      position:fixed; inset:0; z-index:-2; overflow:hidden; background:#000;
    }
    #bg-slideshow img{
      position:absolute; inset:0; width:100%; height:100%; object-fit:cover;
      opacity:0; transition:opacity 1.2s ease;
      filter: saturate(1.05) contrast(1.05);
    }
    #bg-slideshow img.active{ opacity:1; }

    /* Voile blanc pour lisibilit√© du contenu */
    .page-overlay{
      position:fixed; inset:0; z-index:-1; pointer-events:none;
      background: rgba(255,255,255,.78);
      backdrop-filter: blur(2px);
    }

    .container{width:min(1100px,92vw);margin:0 auto}
    header{
      position:sticky; top:0; z-index:10; background:rgba(255,255,255,.85);
      backdrop-filter: saturate(1.1) blur(8px);
      border-bottom:1px solid var(--line);
    }
    .nav{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
    .brand{display:inline-flex;align-items:center;gap:10px;text-decoration:none;color:var(--ink);font-weight:800}
    .brand-badge{width:38px;height:38px;border-radius:12px;background:linear-gradient(135deg,var(--orange),var(--orange-2));box-shadow:var(--shadow);display:grid;place-items:center;color:#fff;font-weight:900}
    .nav a{color:var(--ink);text-decoration:none;opacity:.9}
    .nav a:hover{color:var(--orange)}
    .nav ul{list-style:none;display:flex;gap:18px;margin:0;padding:0}

    .hero{padding:56px 0 28px}
    .hero-inner{display:grid;gap:24px;align-items:center;grid-template-columns:1.2fr .8fr}
    @media (max-width:900px){.hero-inner{grid-template-columns:1fr}}
    .tag{display:inline-block;padding:6px 10px;border:1px solid var(--line);border-radius:999px;color:var(--muted);font-size:.9rem;background:#fff}
    h1{font-size:clamp(2rem,3vw + 1rem,3.25rem);margin:10px 0 8px;line-height:1.1}
    h1 span,.accent{color:var(--orange)}
    .lead{font-size:clamp(1rem,.6vw + .8rem,1.15rem);color:#2a2a2f}

    .card{background:#fff;border:1px solid var(--line);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow)}
    section{padding:32px 0}
    section h2{font-size:clamp(1.4rem,2.2vw + .6rem,2rem);margin:0 0 14px}
    .two-col{display:grid;gap:18px;grid-template-columns:1fr 1fr}
    @media (max-width:900px){.two-col{grid-template-columns:1fr}}
    .timeline{position:relative;padding-left:22px}
    .timeline::before{content:"";position:absolute;left:8px;top:6px;bottom:6px;width:2px;background:linear-gradient(var(--orange),transparent)}
    .tl-item{margin:12px 0}
    .tl-item strong{color:var(--orange)}

    /* Panneau admin (ajout de slides) */
    .panel{display:grid;gap:12px;align-items:end;grid-template-columns:1.2fr .8fr .8fr auto}
    .panel input[type="url"], .panel input[type="file"], .panel select{width:100%;padding:11px 12px;border-radius:12px;border:1px solid var(--line);background:#fff;color:var(--ink)}
    @media (max-width:950px){.panel{grid-template-columns:1fr}}

    .muted{color:var(--muted)}
    .badge{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:#fff}
    .spacer{height:24px}
    footer{border-top:1px solid var(--line);padding:20px 0 50px;color:var(--muted)}
    a.link{color:var(--orange)}
    .btn{appearance:none;border:1px solid var(--line);cursor:pointer;font-weight:700;letter-spacing:.2px;padding:12px 18px;border-radius:12px;background:#fff}
    .btn-primary{background:linear-gradient(135deg,var(--orange),var(--orange-2));color:#fff;border:none}
    .btn-ghost{background:#fff;color:var(--ink)}

    /* Badge Admin */
    .admin-badge{
      position:fixed; right:12px; bottom:12px; z-index:9999;
      padding:8px 12px; border-radius:999px; border:1px solid var(--line);
      background:#fff; box-shadow:var(--shadow); font-size:.9rem
    }
  </style>
</head>
<body>
  <!-- Couche fond (diaporama) -->
  <div id="bg-slideshow" aria-hidden="true"></div>
  <div class="page-overlay" aria-hidden="true"></div>

  <header>
    <div class="container nav">
      <a class="brand" href="#top" aria-label="Accueil Gala Couleur 2026">
        <div class="brand-badge" aria-hidden="true">GC</div>
        Gala Couleur 2026
      </a>
      <nav aria-label="Navigation principale">
        <ul>
          <li><a href="#a-propos">√Ä propos</a></li>
          <li><a href="#programme">Programme</a></li>
          <li><a href="#galerie">Fond & Admin</a></li>
          <li><a href="#rsvp">RSVP</a></li>
          <li><a href="#infos">Infos</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="top">
    <section class="hero">
      <div class="container hero-inner">
        <div>
          <span class="tag">Th√®me&nbsp;: <strong class="accent">Couleur</strong></span>
          <h1>Gala Couleur <span class="accent">2026</span></h1>
          <p class="lead">Fond d‚Äô√©cran en diaporama (fondu successif), texte noir lisible, accents orange, et panneau d‚Äôupload en mode admin.</p>
          <div class="cta-row">
            <a class="btn btn-primary" href="#galerie">Configurer le fond (admin)</a>
            <a class="btn btn-ghost" href="#rsvp">Confirmer ma venue</a>
          </div>
        </div>
        <div class="card" role="img" aria-label="Pr√©sentation">
          <div class="badge" style="margin-bottom:10px">‚ö° Ambiance</div>
          <p class="muted" style="margin:0">Fond anim√© par diaporama. Vous pouvez ajouter vos visuels (admin).</p>
          <div class="spacer"></div>
          <div class="badge">üìç Lieu</div>
          <p style="margin:6px 0 0">√Ä pr√©ciser ‚Äî 2026</p>
        </div>
      </div>
    </section>

    <section id="a-propos">
      <div class="container two-col">
        <div class="card">
          <h2>√Ä propos</h2>
          <p>Le fond plein √©cran change automatiquement par fondu. Le contenu reste lisible gr√¢ce √† un voile blanc l√©ger.</p>
        </div>
        <div class="card">
          <h2>Couleurs</h2>
          <ul>
            <li><strong>Orange</strong> ‚Äî accent, chaleur, √©nergie</li>
            <li><strong>Noir</strong> ‚Äî texte, √©l√©gance, contraste</li>
          </ul>
          <!-- Codes couleurs retir√©s de l'UI -->
        </div>
      </div>
    </section>

    <section id="programme">
      <div class="container">
        <h2>Programme</h2>
        <div class="card timeline">
          <div class="tl-item"><strong>19:00</strong> ‚Äî Ouverture des portes</div>
          <div class="tl-item"><strong>20:00</strong> ‚Äî Performance d‚Äôouverture</div>
          <div class="tl-item"><strong>21:30</strong> ‚Äî Live band & installation visuelle</div>
          <div class="tl-item"><strong>23:00</strong> ‚Äî DJ set</div>
        </div>
      </div>
    </section>

    <section id="galerie">
      <div class="container">
        <h2>Fond & Admin (diaporama)</h2>

        <!-- PANNEAU D'AJOUT ‚Äî visible seulement en admin -->
        <div class="card admin-only" style="margin-bottom:14px">
          <div class="panel">
            <div>
              <label for="image-url" class="muted">URL de l‚Äôimage</label>
              <input id="image-url" type="url" placeholder="https://exemple.com/visuel.webp" />
            </div>
            <div>
              <label for="image-file" class="muted">Ou importer un fichier</label>
              <input id="image-file" type="file" accept="image/*" />
            </div>
            <div>
              <label for="slide-duration" class="muted">Dur√©e (ms) par image</label>
              <input id="slide-duration" type="number" min="2000" step="500" value="6000" />
            </div>
            <div>
              <button id="add-btn" class="btn btn-primary" type="button">Ajouter au fond</button>
            </div>
          </div>
          <small class="muted">
            Astuce : ajoute plusieurs images ‚Äî elles d√©fileront automatiquement en fondu.  
            <br/>Utilise <code>?admin=1</code> pour afficher ce panneau, et ‚Äúd√©sactiver‚Äù via le badge.
          </small>
        </div>

        <div class="card admin-only" id="slides-admin">
          <details open>
            <summary><strong>Diaporama ‚Äî liste des visuels</strong></summary>
            <div id="slides-list" class="muted" style="display:grid;gap:8px;margin-top:10px"></div>
            <div class="spacer"></div>
            <button class="btn" id="shuffle-btn" type="button">M√©langer l‚Äôordre</button>
            <button class="btn" id="clear-btn" type="button">Tout retirer</button>
          </details>
        </div>

      </div>
    </section>

    <!-- RSVP -->
    <section id="rsvp">
      <div class="container">
        <h2>RSVP</h2>
        <form action="https://formspree.io/f/XXXX-REMPLACEZ-PAR-VOTRE-ID-XXXX" method="POST" class="card" style="display:grid;gap:12px;max-width:760px">
          <div class="two-col" style="grid-template-columns:1fr 1fr;gap:12px">
            <div>
              <label class="muted">Pr√©nom</label>
              <input name="prenom" required style="width:100%;padding:11px;border-radius:12px;border:1px solid var(--line);background:#fff;color:var(--ink)">
            </div>
            <div>
              <label class="muted">Nom</label>
              <input name="nom" required style="width:100%;padding:11px;border-radius:12px;border:1px solid var(--line);background:#fff;color:var(--ink)">
            </div>
          </div>

          <div>
            <label class="muted">E-mail</label>
            <input type="email" name="email" required style="width:100%;padding:11px;border-radius:12px;border:1px solid var(--line);background:#fff;color:var(--ink)">
          </div>

          <div class="two-col" style="grid-template-columns:1fr 1fr;gap:12px">
            <div>
              <label class="muted">Pr√©sence</label>
              <select name="presence" required style="width:100%;padding:11px;border-radius:12px;border:1px solid var(--line);background:#fff;color:var(--ink)">
                <option value="Oui">Oui, je viens</option>
                <option value="Non">Non, d√©sol√©¬∑e</option>
                <option value="Peut-√™tre">Peut-√™tre</option>
              </select>
            </div>
            <div>
              <label class="muted">Nombre d‚Äôaccompagnants</label>
              <input type="number" name="guests" min="0" value="0" style="width:100%;padding:11px;border-radius:12px;border:1px solid var(--line);background:#fff;color:var(--ink)">
            </div>
          </div>

          <div>
            <label class="muted">Message (optionnel)</label>
            <textarea name="message" rows="3" style="width:100%;padding:11px;border-radius:12px;border:1px solid var(--line);background:#fff;color:var(--ink)"></textarea>
          </div>

          <input type="hidden" name="_subject" value="RSVP ‚Äî Gala Couleur 2026">
          <input type="hidden" name="_captcha" value="false">
          <!-- <input type="hidden" name="_next" value="https://TON-DOMAINE/merci.html"> -->
          <input type="text" name="_honey" style="display:none">

          <button class="btn btn-primary" type="submit">Envoyer l‚ÄôRSVP</button>
          <small class="muted">En soumettant, vous acceptez d‚Äô√™tre contact√©¬∑e concernant le Gala 2026.</small>
        </form>
      </div>
    </section>

    <section id="infos">
      <div class="container two-col">
        <div class="card">
          <h2>Infos pratiques</h2>
          <ul>
            <li>Fond anim√© en diaporama (fondu)</li>
            <li>Lisibilit√© : voile blanc + texte noir</li>
            <li>Admin : <code>?admin=1</code> pour g√©rer les images</li>
          </ul>
        </div>
        <div class="card">
          <h2>Contact</h2>
          <p class="muted">Partenaires, b√©n√©voles, m√©dias ‚Äî ajoutez votre email ici.</p>
          <a class="btn" href="mailto:orga@gala-couleur.example">orga@gala-couleur.example</a>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      ¬© 2026 Gala Couleur ‚Äî Fond diaporama en fondu, admin upload & RSVP.
    </div>
  </footer>

  <script>
    /* ===== Helpers ===== */
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));

    /* ===== Admin Gate (URL ?admin=1) ===== */
    (function adminGate(){
      const params = new URLSearchParams(location.search);
      const isAdmin = params.get('admin') === '1' || localStorage.getItem('gc_admin') === '1';
      if (isAdmin) {
        localStorage.setItem('gc_admin', '1');
        const badge = document.createElement('div');
        badge.className = 'admin-badge badge';
        badge.innerHTML = 'üîí Mode admin actif ‚Äî <a class="link" href="#" id="logout-admin">d√©sactiver</a>';
        document.body.appendChild(badge);
        $('#logout-admin').addEventListener('click', (e) => {
          e.preventDefault();
          localStorage.removeItem('gc_admin');
          location.href = location.pathname;
        });
      } else {
        $$('.admin-only').forEach(el => el.remove());
      }
    })();

    /* ===== Diaporama plein √©cran (fondu) ===== */
    const SlideShow = (() => {
      const root = $('#bg-slideshow');
      const slides = [];           // {imgEl, duration}
      let current = -1;
      let timer = null;
      let defaultDuration = 6000;  // ms, peut √™tre chang√© via input

      function add(src, duration){
        const img = new Image();
        img.decoding = 'async';
        img.loading = 'lazy';
        img.style.opacity = '0';
        img.alt = 'Fond diaporama';
        img.addEventListener('error', ()=> img.remove());
        img.src = src;
        root.appendChild(img);
        slides.push({ imgEl: img, duration: duration || defaultDuration });
        if (slides.length === 1) {
          // premi√®re image -> afficher
          img.classList.add('active');
          current = 0;
          start();
        }
        renderAdminList();
        return img;
      }

      function clear(){
        slides.splice(0, slides.length);
        root.innerHTML = '';
        stop();
        current = -1;
        renderAdminList();
      }

      function shuffle(){
        for (let i = slides.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [slides[i], slides[j]] = [slides[j], slides[i]];
        }
        // R√©organiser l'ordre dans le DOM
        root.innerHTML = '';
        slides.forEach(s => root.appendChild(s.imgEl));
        renderAdminList();
      }

      function next(){
        if (slides.length === 0) return;
        const prev = current;
        current = (current + 1) % slides.length;
        if (prev !== -1) slides[prev].imgEl.classList.remove('active');
        slides[current].imgEl.classList.add('active');
        schedule();
      }

      function schedule(){
        stop();
        if (slides.length === 0) return;
        const dur = slides[current].duration || defaultDuration;
        timer = setTimeout(next, dur);
      }
      function start(){
        stop();
        if (slides.length > 0) timer = setTimeout(next, slides[current].duration || defaultDuration);
      }
      function stop(){
        if (timer) { clearTimeout(timer); timer = null; }
      }

      // Admin: liste & actions
      const listEl = $('#slides-list');
      function renderAdminList(){
        if (!listEl) return;
        listEl.innerHTML = '';
        slides.forEach((s, i) => {
          const row = document.createElement('div');
          row.style.display = 'grid';
          row.style.gridTemplateColumns = '60px 1fr auto auto';
          row.style.alignItems = 'center';
          row.style.gap = '10px';
          row.style.padding = '8px';
          row.style.border = '1px solid var(--line)';
          row.style.borderRadius = '10px';
          row.style.background = '#fff';

          const thumb = document.createElement('img');
          thumb.src = s.imgEl.src;
          thumb.style.width = '60px';
          thumb.style.height = '40px';
          thumb.style.objectFit = 'cover';
          thumb.style.borderRadius = '8px';
          row.appendChild(thumb);

          const urlInput = document.createElement('input');
          urlInput.type = 'url';
          urlInput.placeholder = 'URL image';
          urlInput.value = s.imgEl.src;
          urlInput.style.width = '100%';
          urlInput.style.padding = '8px';
          urlInput.style.border = '1px solid var(--line)';
          urlInput.style.borderRadius = '10px';
          row.appendChild(urlInput);

          const durInput = document.createElement('input');
          durInput.type = 'number';
          durInput.min = '2000';
          durInput.step = '500';
          durInput.value = s.duration || defaultDuration;
          durInput.title = 'Dur√©e (ms)';
          durInput.style.width = '110px';
          durInput.style.padding = '8px';
          durInput.style.border = '1px solid var(--line)';
          durInput.style.borderRadius = '10px';
          row.appendChild(durInput);

          const btns = document.createElement('div');
          btns.style.display = 'flex'; btns.style.gap = '8px';

          const up = document.createElement('button'); up.className='btn'; up.textContent='‚Üë';
          const down = document.createElement('button'); down.className='btn'; down.textContent='‚Üì';
          const apply = document.createElement('button'); apply.className='btn btn-primary'; apply.textContent='Appliquer';
          const del = document.createElement('button'); del.className='btn'; del.textContent='Retirer';

          up.addEventListener('click', ()=>{
            if (i<=0) return;
            const temp = slides[i-1]; slides[i-1] = slides[i]; slides[i] = temp;
            root.innerHTML=''; slides.forEach(ss=>root.appendChild(ss.imgEl));
            renderAdminList();
          });
          down.addEventListener('click', ()=>{
            if (i>=slides.length-1) return;
            const temp = slides[i+1]; slides[i+1] = slides[i]; slides[i] = temp;
            root.innerHTML=''; slides.forEach(ss=>root.appendChild(ss.imgEl));
            renderAdminList();
          });
          apply.addEventListener('click', ()=>{
            const wasActive = slides[i].imgEl.classList.contains('active');
            slides[i].imgEl.classList.remove('active');
            slides[i].imgEl.src = urlInput.value.trim() || slides[i].imgEl.src;
            slides[i].duration = parseInt(durInput.value||defaultDuration,10);
            if (wasActive) slides[i].imgEl.classList.add('active');
          });
          del.addEventListener('click', ()=>{
            const wasActive = slides[i].imgEl.classList.contains('active');
            slides[i].imgEl.remove();
            slides.splice(i,1);
            if (wasActive) { current = -1; stop(); if (slides.length>0){ slides[0].imgEl.classList.add('active'); current=0; start(); } }
            renderAdminList();
          });

          btns.append(up,down,apply,del);
          row.appendChild(btns);
          listEl.appendChild(row);
        });
      }

      // API publique
      return {
        add,
        clear,
        shuffle,
        setDefaultDuration(ms){ defaultDuration = Math.max(2000, +ms||defaultDuration); },
        _debug(){ return {slides, current}; }
      };
    })();

    // Compat minimal avec anciens appels
    function insertAnimatedImage(src){ SlideShow.add(src); }
    function clearGallery(){ SlideShow.clear(); }
    function applyAnimationToAll(){ /* sans objet ici, on g√®re par fondu */ }

    // Panneau admin
    const addBtn = $('#add-btn');
    if (addBtn) {
      addBtn.addEventListener('click', ()=>{
        const url = $('#image-url')?.value.trim();
        const dur = parseInt($('#slide-duration')?.value||'6000',10);
        const fileInput = $('#image-file');
        let src = url;
        if(fileInput?.files && fileInput.files[0]){
          src = URL.createObjectURL(fileInput.files[0]);
        }
        if(!src){ alert('Ajoutez une URL valide ou importez un fichier.'); return }
        SlideShow.setDefaultDuration(dur);
        SlideShow.add(src, dur);
        if ($('#image-url')) $('#image-url').value = '';
        if (fileInput) fileInput.value = '';
      });
    }
    const shuffleBtn = $('#shuffle-btn');
    if (shuffleBtn) shuffleBtn.addEventListener('click', ()=> SlideShow.shuffle());
    const clearBtn = $('#clear-btn');
    if (clearBtn) clearBtn.addEventListener('click', ()=> SlideShow.clear());

    // S√©quence de d√©mo (si aucun slide ajout√©)
    document.addEventListener('DOMContentLoaded', ()=>{
      if (!document.querySelector('#bg-slideshow img')) {
        const demo = [
          "https://images.unsplash.com/photo-1526948128573-703ee1aeb6fa?auto=format&fit=crop&w=1600&q=60",
          "https://images.unsplash.com/photo-1501594907352-04cda38ebc29?auto=format&fit=crop&w=1600&q=60",
          "https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?auto=format&fit=crop&w=1600&q=60",
        ];
        demo.forEach(src => SlideShow.add(src, 6000));
      }
    });
  </script>
</body>
</html>
